<h3>Report an issue</h3>

@if (issueForm) {
  <form clrForm [formGroup]="issueForm" (ngSubmit)="addIssue()">
    <clr-input-container>
      <label>Title</label>
      <input clrInput formControlName="title" />
      <clr-control-error>Title is required</clr-control-error>
    </clr-input-container>
    @if (suggestions().length) {
      <div class="clr-row" data-test="suggestions">
        <div class="clr-col-lg-2"></div>
        <div class="clr-col-lg-6">
          <clr-stack-view>
            <clr-stack-header>Similar issues</clr-stack-header>
            @for (suggestion of suggestions(); track suggestion) {
              <clr-stack-block >
                  <clr-stack-label>#{{suggestion.issueNo}}:{{suggestion.title}}</clr-stack-label>
                  <clr-stack-content>{{suggestion.description}}</clr-stack-content>
              </clr-stack-block>
            }
          </clr-stack-view>
        </div>
      </div>
    }
    <clr-textarea-container>
      <label>Description</label>
      <textarea clrTextarea formControlName="description"></textarea>
    </clr-textarea-container>
    <clr-radio-container clrInline>
      <label>Priority</label>
      <clr-radio-wrapper>
        <input type="radio" value="low" clrRadio formControlName="priority" />
        <label>Low</label>
      </clr-radio-wrapper>
      <clr-radio-wrapper>
        <input type="radio" value="high" clrRadio formControlName="priority" />
        <label>High</label>
      </clr-radio-wrapper>
      <clr-control-error>Priority is required</clr-control-error>
    </clr-radio-container>
    <clr-select-container>
      <label>Type</label>
      <select clrSelect formControlName="type">
        <option value="Feature">Feature</option>
        <option value="Bug">Bug</option>
        <option value="Documentation">Documentation</option>
      </select>
      <clr-control-error>Type is required</clr-control-error>
    </clr-select-container>
    <button class="btn btn-primary"
            type="submit"
            (click)="addIssue()">
          Create
    </button>
    <button class="btn"
            type="button"
            (click)="closeform()">
          Cancel
    </button>
  </form>
}
